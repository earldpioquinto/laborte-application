import{P as c,j as t,B as C,r as o,G as s,g as F,M as I,T as L}from"./index-mqNgpQq7.js";import{S as T}from"./SubCard-B2I1m8Lm.js";import{u,D as A,B as b,M as U,T as x}from"./dataStore-BeDGY16T.js";import{D as P}from"./DynamicModal-B9ebPJl1.js";c.string,c.bool,c.string,c.object;c.node,c.string,c.string;var i=[];for(var f=0;f<256;++f)i.push((f+256).toString(16).slice(1));function _(a,e=0){return(i[a[e+0]]+i[a[e+1]]+i[a[e+2]]+i[a[e+3]]+"-"+i[a[e+4]]+i[a[e+5]]+"-"+i[a[e+6]]+i[a[e+7]]+"-"+i[a[e+8]]+i[a[e+9]]+"-"+i[a[e+10]]+i[a[e+11]]+i[a[e+12]]+i[a[e+13]]+i[a[e+14]]+i[a[e+15]]).toLowerCase()}var g,E=new Uint8Array(16);function O(){if(!g&&(g=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!g))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return g(E)}var z=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const D={randomUUID:z};function V(a,e,d){if(D.randomUUID&&!e&&!a)return D.randomUUID();a=a||{};var l=a.random||(a.rng||O)();return l[6]=l[6]&15|64,l[8]=l[8]&63|128,_(l)}const M=(a,e,d)=>{switch(a){case"view":window.location.href=`http://localhost:3000/members/profile/${e}`;break;case"delete":window.confirm("Are you sure you want to delete this member?")&&(d(e),console.log(`Delete action on row with id ${e}`));break}},W=a=>[{field:"id",headerName:"ID",width:100},{field:"first_name",headerName:"First Name",width:125,editable:!1},{field:"last_name",headerName:"Last Name",width:150,editable:!1},{field:"membership_date",headerName:"Date",width:120,editable:!1},{field:"membership_fee",headerName:"Fee",width:70,editable:!1},{field:"actions",headerName:"",flex:1,minWidth:300,editable:!1,renderCell:e=>t.jsxs("div",{children:[t.jsx(b,{variant:"contained",color:"error",size:"small",style:{marginRight:8},onClick:()=>M("delete",e.row.id,a),children:"Delete"}),t.jsx(b,{variant:"contained",color:"primary",size:"small",onClick:()=>M("view",e.row.id,a),children:"View Profile"})]})}];function B(){const a=u(r=>r.memberData),e=u(r=>r.updateInterestRow),d=u(r=>r.deleteMember),l=(r,j)=>(e(r),r);return t.jsx(C,{sx:{width:"100%"},children:t.jsx(A,{rows:a,columns:W(d),processRowUpdate:l,initialState:{pagination:{paginationModel:{pageSize:10}}},pageSizeOptions:[5,10,100],disableRowSelectionOnClick:!0,disableSelectionOnClick:!0})})}const G=({props:a,handleClose:e})=>{const[d,l]=o.useState(""),[r,j]=o.useState(""),[w,v]=o.useState(""),[y,N]=o.useState(10),[p,m]=o.useState(""),k=u(n=>n.addOrUpdateMember),h=u(n=>n.duplicateFound),S=u(n=>n.clearDuplicateFlag);o.useEffect(()=>{v(new Date().toISOString().substring(0,10))},[]),o.useEffect(()=>{h&&(m("Duplicate entry found"),setTimeout(()=>{S(),m("")},1e3))},[h,S]);const R=()=>{const n={id:V(),first_name:d,last_name:r,membership_date:w,membership_fee:y.toFixed(2),records:{}};k(n),m("Saved successfully")};return o.useEffect(()=>{!h&&p==="Saved successfully"&&setTimeout(()=>{m(""),e()},2e3)},[h,p,e]),t.jsxs(t.Fragment,{children:[t.jsx(U,{title:"Add Member",children:t.jsx(s,{container:!0,spacing:F,sx:{maxHeight:"800px",overflow:"auto"},children:t.jsx(s,{item:!0,xs:12,children:t.jsx(T,{children:t.jsxs(s,{container:!0,spacing:2,children:[t.jsx(s,{item:!0,xs:12,children:t.jsx(x,{fullWidth:!0,label:"First Name",value:d,onChange:n=>l(n.target.value)})}),t.jsx(s,{item:!0,xs:12,children:t.jsx(x,{fullWidth:!0,label:"Last Name",value:r,onChange:n=>j(n.target.value)})}),t.jsx(s,{item:!0,xs:12,children:t.jsx(x,{fullWidth:!0,label:"Membership Date",type:"date",value:w,onChange:n=>v(n.target.value),InputLabelProps:{shrink:!0}})}),t.jsx(s,{item:!0,xs:12,children:t.jsx(x,{fullWidth:!0,label:"Membership Fee",type:"number",value:y,onChange:n=>N(parseFloat(n.target.value)),InputProps:{inputProps:{step:.01,min:0}}})}),t.jsxs(s,{item:!0,xs:12,container:!0,justifyContent:"space-between",children:[t.jsx(b,{variant:"contained",color:"primary",onClick:R,children:"Save"}),t.jsx(b,{variant:"outlined",color:"secondary",onClick:e,children:"Cancel"})]})]})})})})}),t.jsx(I,{open:!!p,onClose:()=>m(""),children:t.jsx(C,{sx:{width:300,padding:3,margin:"auto",marginTop:"20%",backgroundColor:"background.paper",boxShadow:24,borderRadius:2,textAlign:"center"},children:t.jsx(L,{variant:"h6",children:p})})})]})},K=()=>{const[a,e]=o.useState(!0);return o.useEffect(()=>{e(!1)},[]),t.jsx(U,{title:"Member List",children:t.jsxs(s,{container:!0,spacing:F,children:[t.jsx(s,{item:!0,xs:12,sx:{textAlign:"end"},children:t.jsx(P,{component:G,componentProps:{props:"first"},buttonLabel:"Add Member +"})}),t.jsx(s,{item:!0,xs:12,children:t.jsx(B,{})})]})})};export{K as default};
