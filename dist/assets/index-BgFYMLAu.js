import{r as g,j as a,B as c,G as p,g as D}from"./index-mqNgpQq7.js";import{u as v,F as R,I as Y,S as A,d as E,D as b,M as I}from"./dataStore-BeDGY16T.js";import{G as L}from"./GridToolbar-B3HiYU8t.js";const f=[{field:"fullName",headerName:"Name",minWidth:200,editable:!0},{field:"jan",headerName:"JAN",width:100,editable:!0,headerClassName:"evenColumn",cellClassName:"evenColumn"},{field:"feb",headerName:"FEB",width:100,editable:!0},{field:"mar",headerName:"MAR",width:100,editable:!0,headerClassName:"evenColumn",cellClassName:"evenColumn"},{field:"apr",headerName:"APR",width:100,editable:!0},{field:"may",headerName:"MAY",width:100,editable:!0,headerClassName:"evenColumn",cellClassName:"evenColumn"},{field:"jun",headerName:"JUN",width:100,editable:!0},{field:"jul",headerName:"JUL",width:100,editable:!0,headerClassName:"evenColumn",cellClassName:"evenColumn"},{field:"aug",headerName:"AUG",width:100,editable:!0},{field:"sep",headerName:"SEP",width:100,editable:!0,headerClassName:"evenColumn",cellClassName:"evenColumn"},{field:"oct",headerName:"OCT",width:100,editable:!0},{field:"nov",headerName:"NOV",width:100,editable:!0,headerClassName:"evenColumn",cellClassName:"evenColumn"},{field:"dec",headerName:"DEC",width:100,editable:!0},{field:"total",headerName:"TOTAL",width:100,editable:!0}],C=new Date().getFullYear(),M=Array.from({length:C-2009},(n,r)=>C-r+1);function G(){const[n,r]=g.useState(C),x=v(e=>e.memberData),w=v(e=>e.updateInterestRow),j=e=>{r(e.target.value)},S=(e,t)=>(w(e),e),u=e=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),h=x.map(e=>{var m;const i=(((m=e.records)==null?void 0:m.savings)||[]).filter(l=>l.year===n),d={id:e.id,fullName:`${e.first_name} ${e.last_name}`},s={jan:0,feb:0,mar:0,apr:0,may:0,jun:0,jul:0,aug:0,sep:0,oct:0,nov:0,dec:0,total:0};return i.forEach(l=>{const T=new Date(l.year,l.month-1).toLocaleString("default",{month:"short"}).toLowerCase();s[T]+=parseFloat(l.value),s.total+=parseFloat(l.value)}),Object.keys(s).forEach(l=>{d[l]=s[l]===0?"-":u(s[l])}),d});console.log("Aggregated Savings:",h);const o=f.reduce((e,t)=>{if(t.field!=="fullName"&&t.field!=="total"){const i=h.reduce((d,s)=>{const m=parseFloat(s[t.field]!=="-"?s[t.field].replace(/,/g,""):0);return d+m},0);e[t.field]=i===0?"-":u(i)}return e},{});console.log("Monthly Totals:",o);const N=Object.values(o).reduce((e,t)=>e+(t!=="-"?parseFloat(t.replace(/,/g,"")):0),0);o.total=N===0?"-":u(N);const y={id:"total",fullName:"Monthly Totals",...o},F=f.map(e=>({...e,headerName:e.field==="fullName"?"":e.headerName}));return a.jsxs(c,{sx:{width:"100%"},children:[a.jsx(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:2},children:a.jsxs(R,{sx:{minWidth:120},children:[a.jsx(Y,{id:"year-label",children:"Year"}),a.jsx(A,{labelId:"year-label",value:n,label:"Year",onChange:j,children:M.map(e=>a.jsx(E,{value:e,children:e},e))})]})}),a.jsx(b,{rows:h,columns:f,components:{Toolbar:L},pagination:!0,pageSizeOptions:[5,20,100],pageSize:5,autoHeight:!0,processRowUpdate:S,sx:{"& .evenColumn":{backgroundColor:"#ff00ff11"}}}),a.jsx(c,{sx:{height:200,width:"100%",marginTop:2},children:a.jsx(b,{rows:[y],columns:F,hideFooter:!0,autoHeight:!0,sx:{"& .evenColumn":{backgroundColor:"#ff00ff11"}}})})]})}const J=()=>{const[n,r]=g.useState(!0);return g.useEffect(()=>{r(!1)},[]),a.jsx(I,{title:"Savings",children:a.jsx(p,{container:!0,spacing:D,children:a.jsx(p,{item:!0,xs:12,children:a.jsx(G,{})})})})};export{J as default};
