import{r as f,j as a,B as c,G as g,g as I}from"./index-Do10mwPs.js";import{u as b,F as T,I as E,S as R,d as Y,D as x,M as A}from"./dataStore-C6ZPsL-o.js";import{G as L}from"./GridToolbar-CrTjThf-.js";const h=[{field:"fullName",headerName:"Name",minWidth:200,editable:!0},{field:"jan",headerName:"JAN",width:100,editable:!0,headerClassName:"evenColumn",cellClassName:"evenColumn"},{field:"feb",headerName:"FEB",width:100,editable:!0},{field:"mar",headerName:"MAR",width:100,editable:!0,headerClassName:"evenColumn",cellClassName:"evenColumn"},{field:"apr",headerName:"APR",width:100,editable:!0},{field:"may",headerName:"MAY",width:100,editable:!0,headerClassName:"evenColumn",cellClassName:"evenColumn"},{field:"jun",headerName:"JUN",width:100,editable:!0},{field:"jul",headerName:"JUL",width:100,editable:!0,headerClassName:"evenColumn",cellClassName:"evenColumn"},{field:"aug",headerName:"AUG",width:100,editable:!0},{field:"sep",headerName:"SEP",width:100,editable:!0,headerClassName:"evenColumn",cellClassName:"evenColumn"},{field:"oct",headerName:"OCT",width:100,editable:!0},{field:"nov",headerName:"NOV",width:100,editable:!0,headerClassName:"evenColumn",cellClassName:"evenColumn"},{field:"dec",headerName:"DEC",width:100,editable:!0},{field:"total",headerName:"TOTAL",width:100,editable:!0}],C=new Date().getFullYear(),G=Array.from({length:C-2009},(i,s)=>C-s+1);function M(){const[i,s]=f.useState(C),w=b(e=>e.memberData),j=b(e=>e.updateInterestRow),v=e=>{s(e.target.value)},S=(e,t)=>(j(e),e),m=e=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),N=w.map(e=>{var o;const t=((o=e.records)==null?void 0:o.loans)||[],n={id:e.id,fullName:`${e.first_name} ${e.last_name}`},l={jan:0,feb:0,mar:0,apr:0,may:0,jun:0,jul:0,aug:0,sep:0,oct:0,nov:0,dec:0,total:0};return t.forEach(r=>{r.paymentSchedule.forEach(d=>{if(d.year===i){const D=new Date(d.year,d.monthValue-1).toLocaleString("default",{month:"short"}).toLowerCase();l[D]+=parseFloat(d.interestPayment),l.total+=parseFloat(d.interestPayment)}})}),Object.keys(l).forEach(r=>{n[r]=l[r]===0?"-":m(l[r])}),n}),u=h.reduce((e,t)=>{if(t.field!=="fullName"&&t.field!=="total"){const n=N.reduce((l,o)=>{const r=parseFloat(o[t.field]!=="-"?o[t.field].replace(/,/g,""):0);return l+r},0);e[t.field]=n===0?"-":m(n)}return e},{}),p=Object.values(u).reduce((e,t)=>e+(t!=="-"?parseFloat(t.replace(/,/g,"")):0),0);u.total=p===0?"-":m(p);const F={id:"total",fullName:"Monthly Totals",...u},y=h.map(e=>({...e,headerName:e.field==="fullName"?"":e.headerName}));return a.jsxs(c,{sx:{width:"100%"},children:[a.jsx(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:2},children:a.jsxs(T,{sx:{minWidth:120},children:[a.jsx(E,{id:"year-label",children:"Year"}),a.jsx(R,{labelId:"year-label",value:i,label:"Year",onChange:v,children:G.map(e=>a.jsx(Y,{value:e,children:e},e))})]})}),a.jsx(x,{rows:N,columns:h,components:{Toolbar:L},pagination:!0,pageSizeOptions:[5,20,100],pageSize:5,autoHeight:!0,processRowUpdate:S,sx:{"& .evenColumn":{backgroundColor:"#ff00ff11"}}}),a.jsx(c,{sx:{height:200,width:"100%",marginTop:2},children:a.jsx(x,{rows:[F],columns:y,hideFooter:!0,autoHeight:!0,sx:{"& .evenColumn":{backgroundColor:"#ff00ff11"}}})})]})}const B=()=>{const[i,s]=f.useState(!0);return f.useEffect(()=>{s(!1)},[]),a.jsx(A,{title:"Interests",children:a.jsx(g,{container:!0,spacing:I,children:a.jsx(g,{item:!0,xs:12,children:a.jsx(M,{})})})})};export{B as default};
